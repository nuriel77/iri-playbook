{"__inputs":[{"name":"DS_LOCALHOST","label":"localhost","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"}],"__requires":[{"type":"grafana","id":"grafana","name":"Grafana","version":"4.2.0"},{"type":"panel","id":"graph","name":"Graph","version":""},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"singlestat","name":"Singlestat","version":""}],"annotations":{"list":[]},"description":"HAProxy backend servers","editable":true,"gnetId":10225,"graphTooltip":1,"hideControls":false,"id":null,"links":[],"refresh":"5m","rows":[{"collapse":false,"height":123,"panels":[{"cacheTimeout":null,"colorBackground":false,"colorValue":false,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"datasource":"Prometheus","format":"s","gauge":{"maxValue":100,"minValue":0,"show":false,"thresholdLabels":false,"thresholdMarkers":true},"id":149,"interval":null,"links":[],"mappingType":1,"mappingTypes":[{"name":"value to text","value":1},{"name":"range to text","value":2}],"maxDataPoints":100,"nullPointMode":"connected","nullText":null,"postfix":"","postfixFontSize":"50%","prefix":"","prefixFontSize":"50%","rangeMaps":[{"from":"null","text":"N/A","to":"null"}],"span":2,"sparkline":{"fillColor":"rgba(31, 118, 189, 0.18)","full":false,"lineColor":"rgb(31, 120, 193)","show":false},"targets":[{"expr":"time() - haproxy_process_start_time_seconds","intervalFactor":2,"refId":"A","step":1800}],"thresholds":"","title":"Started time","type":"singlestat","valueFontSize":"50%","valueMaps":[{"op":"=","text":"N/A","value":"null"}],"valueName":"current"},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"fill":5,"id":85,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideZero":false,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"Backends Up"},{"alias":"Backends Up","transform":"negative-Y"}],"span":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(haproxy_frontend_status{instance=~\"$host:$port\"} == 1)","hide":false,"interval":"$interval","intervalFactor":2,"legendFormat":"Frontends Up","refId":"A","step":60},{"expr":"count(haproxy_backend_status{instance=~\"$host:$port\"} ==1)","interval":"$interval","intervalFactor":2,"legendFormat":"Backends Up","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Status","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Basic Backend status","titleSize":"h6"},{"collapse":false,"height":377,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":83,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Back.*/","transform":"negative-Y"},{"alias":"/.*1.*/","color":"#6ED0E0"},{"alias":"/.*2.*/","color":"#7EB26D"},{"alias":"/.*3.*/","color":"#1F78C1"},{"alias":"/.*4.*/","color":"#CCA300"},{"alias":"/.*5.*/","color":"#890F02"},{"alias":"/.*other.*/","color":"#806EB7"}],"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(haproxy_frontend_http_responses_total{proxy=~\"$frontend\",code=~\"$code\",instance=~\"$host:$port\"}[5m])) by (code)","interval":"$interval","intervalFactor":1,"legendFormat":"Frontend {{ code }}","metric":"","refId":"A","step":30},{"expr":"sum(irate(haproxy_backend_http_responses_total{proxy=~\"$backend\",code=~\"$code\",instance=~\"$host:$port\"}[5m])) by (code)","interval":"$interval","intervalFactor":1,"legendFormat":"Backend {{ code }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Total number of HTTP responses","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":75,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*OUT.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(haproxy_frontend_bytes_in_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"IN Front","metric":"","refId":"A","step":30},{"expr":"sum(irate(haproxy_frontend_bytes_out_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8) by (instance)","interval":"$interval","intervalFactor":2,"legendFormat":"OUT Front","refId":"B","step":60},{"expr":"sum(irate(haproxy_backend_bytes_in_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])*8) by (instance)","intervalFactor":2,"legendFormat":"IN Back","refId":"C","step":240},{"expr":"sum(irate(haproxy_backend_bytes_out_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])*8) by (instance)","intervalFactor":2,"legendFormat":"OUT Back","refId":"D","step":240}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Current total of incoming / outgoing bytes","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":79,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Back.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(haproxy_frontend_connections_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Front","metric":"","refId":"A","step":30},{"expr":"sum(irate(haproxy_backend_connection_errors_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Back errors","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Total number of connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":81,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Response.*/","transform":"negative-Y"},{"alias":"/.*Backend.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(haproxy_frontend_http_requests_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Frontend requests","metric":"","refId":"A","step":30},{"expr":"sum(irate(haproxy_frontend_request_errors_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Frontend requests errors","metric":"","refId":"C","step":30},{"expr":"sum(irate(haproxy_frontend_requests_denied_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":2,"legendFormat":"Frontend request denied","refId":"F","step":60},{"expr":"sum(irate(haproxy_backend_redispatch_warnings_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":2,"legendFormat":"Backend redispatch warnings","refId":"D","step":60},{"expr":"sum(irate(haproxy_backend_retry_warnings_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":2,"legendFormat":"Backend retry warnings","refId":"E","step":60},{"expr":"sum(irate(haproxy_backend_response_errors_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Backend response errors","metric":"","refId":"I","step":30},{"expr":"sum(haproxy_backend_current_queue{proxy=~\"$backend\",instance=~\"$host:$port\"}) by (instance)","interval":"$interval","intervalFactor":2,"legendFormat":"Backend queued requests","refId":"G","step":60},{"expr":"sum(irate(haproxy_backend_http_requests_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Backend requests","metric":"","refId":"H","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Total received requests / responses","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":84,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Back.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(irate(haproxy_frontend_current_sessions{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Frontend current sessions","metric":"","refId":"B","step":30},{"expr":"sum(irate(haproxy_backend_current_sessions{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)","interval":"$interval","intervalFactor":1,"legendFormat":"Backend current sessions","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Number of active sessions","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Basic General Info","titleSize":"h6"},{"collapse":true,"height":567,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":27,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_connection_attempts_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Attempts {{ proxy }}","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_backend_connection_errors_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Error {{ proxy }}","refId":"A","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total number of connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":1,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*OUT.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_bytes_in_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])*8","interval":"$interval","intervalFactor":1,"legendFormat":"IN {{ proxy }}","metric":"haproxy_backend_","refId":"A","step":30},{"expr":"irate(haproxy_backend_bytes_out_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])*8","interval":"$interval","intervalFactor":2,"legendFormat":"OUT {{ proxy }}","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Current total of incoming / outgoing bytes","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":42,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"sideWidth":null,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*OUT.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_bytes_in_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8","interval":"$interval","intervalFactor":1,"legendFormat":"IN {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_frontend_bytes_out_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8","interval":"$interval","intervalFactor":2,"legendFormat":"OUT {{ proxy }}","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Current total of incoming / outgoing bytes","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":43,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_connections_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }}","metric":"haproxy_backe","refId":"B","step":30},{"expr":"irate(haproxy_frontend_denied_connections_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Denied {{ proxy }}","metric":"haproxy_backe","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total number of connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":131,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_connection_reuses_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Reuses {{ proxy }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total number of connections reuses","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":0,"grid":{},"id":114,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_frontend_connections_rate_max{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"haproxy_backe","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Maximum observed number of connections per second","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Throughtput / Connections","titleSize":"h6"},{"collapse":true,"height":463,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":28,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_current_queue{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Current number of queued requests not assigned to any server","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":0,"grid":{},"id":32,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_max_queue{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Maximum observed number of queued requests not assigned to any server","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":127,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_http_queue_time_average_seconds{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Avg. queue time for last 1024 successful connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Queue","titleSize":"h6"},{"collapse":true,"height":497,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":134,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_http_requests_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_backend_requests_denied_total{proxy=~\"$frontend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Denied {{ proxy }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total HTTP requests OK / Denied","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":46,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_requests_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_frontend_request_errors_total{proxy=~\"$frontend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Error {{ proxy }}","refId":"B","step":60},{"expr":"irate(haproxy_frontend_requests_denied_total{proxy=~\"$frontend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Denied {{ proxy }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total HTTP requests OK / Error / Denied","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":126,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_responses_denied_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Denied {{ proxy }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total HTTP responses denied","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":115,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_responses_denied_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Denied {{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total HTTP responses Denied","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":35,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_redispatch_warnings_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Redispatch {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_backend_retry_warnings_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Retry {{ proxy }}","refId":"B","step":60},{"expr":"irate(haproxy_backend_response_errors_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Error {{ proxy }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total of Redispatch / Error / Retry warnings","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":138,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_frontend_http_requests_rate_max{proxy=~\"$backend\", instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Maximum observed number of HTTP requests per second","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":132,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*total.*/","stack":false},{"alias":"/.*total.*/","fill":0,"linewidth":2}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_backend_http_connect_time_average_seconds{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. connect time  {{ proxy }}","metric":"haproxy_backend_current_queue","refId":"B","step":30},{"expr":"haproxy_backend_http_response_time_average_seconds{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. response time  {{ proxy }}","metric":"haproxy_backend_current_queue","refId":"C","step":30},{"expr":"haproxy_backend_http_total_time_average_seconds{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. total time  {{ proxy }}","metric":"haproxy_backend_current_queue","refId":"D","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Avg. Times","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Requests / Responses","titleSize":"h6"},{"collapse":true,"height":403,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":24,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_http_responses_total{proxy=~\"$backend\", code=~\"$code\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ code }} {{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total of HTTP responses","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":47,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_responses_total{proxy=~\"$frontend\", code=~\"$code\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ code }} {{ proxy }} ","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total of HTTP responses","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Responses by HTTP code","titleSize":"h6"},{"collapse":true,"height":492,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":30,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Current.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_sessions_total{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"haproxy_backend_current_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Current active {{ proxy }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total number of sessions","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":45,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Denied.*/","transform":"negative-Y"},{"alias":"/.*Current.*/"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_sessions_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_frontend_denied_sessions_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Denied by \"tcp-request session\" rules {{ proxy }}","metric":"","refId":"B","step":30},{"expr":"haproxy_frontend_current_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Current active {{ proxy }}","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total number of sessions","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":1,"grid":{},"id":34,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"minSpan":3,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_max_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"haproxy_backend_limit_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":2,"legendFormat":"Limit {{ proxy }}","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Maximum observed number of active sessions and limit","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":51,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":3,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_max_sessions{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"haproxy_frontend_limit_sessions{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":2,"legendFormat":"Limit {{ proxy }}","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Maximum observed number of active sessions and limit","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":33,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":5,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_max_session_rate{proxy=~\"$backend\",instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Maximum observed number of sessions per second","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":69,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":4,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_frontend_max_session_rate{proxy=~\"$frontend\",instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"haproxy_frontend_limit_session_rate{proxy=~\"$frontend\",instance=~\"$host:$port\"}","intervalFactor":2,"legendFormat":"Limit {{ proxy }}","refId":"B","step":2}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Maximum observed number of sessions per second and limit","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":117,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_failed_header_rewriting_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Failed header rewriting warnings","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":119,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_failed_header_rewriting_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Failed header rewriting warnings","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":124,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_last_session_seconds{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back -  Last session assigned","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":118,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_denied_sessions_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Total HTTP Sessions Denied","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":128,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_client_aborts_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"By client {{ proxy }}","metric":"","refId":"A","step":30},{"expr":"haproxy_backend_server_aborts_total{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"By server {{ proxy }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back -  Data transfers aborted","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":120,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":3,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*limit.*/","fill":0}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_requests_rate_max{proxy=~\"$frontend\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} max","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Maximum observed number of HTTP requests per second","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Sessions","titleSize":"h6"},{"collapse":true,"height":499,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":38,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_check_up_down_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total number of UP->DOWN transitions","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":39,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_weight{proxy=~\"$backend\", instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total weight of the servers in the backend / Active servers backend","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":142,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_last_session_seconds{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Number of seconds since last session assigned to server/backend","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":143,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_loadbalanced_total{proxy=~\"$backend\", instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Total number of times a service was selected","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Health and Weight","titleSize":"h6"},{"collapse":true,"height":409,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":139,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Hits.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_http_cache_lookups_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Lookups {{ proxy }} ","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_backend_http_cache_hits_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Hits {{ proxy }} ","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Cache lookups / hits","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":121,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Hits.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_cache_lookups_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Lookups {{ proxy }} ","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_frontend_http_cache_hits_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Hits {{ proxy }} ","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Cache lookups / hits","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":140,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*emitted.*/","transform":"negative-Y"},{"alias":"/.*bypassed.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_http_comp_bytes_in_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes fed {{ proxy }} ","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_backend_http_comp_bytes_out_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes emitted {{ proxy }} ","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_backend_http_comp_bytes_bypassed_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes bypassed  {{ proxy }} ","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Compressor","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":122,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*emitted.*/","transform":"negative-Y"},{"alias":"/.*bypassed.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_comp_bytes_in_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes fed {{ proxy }} ","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_frontend_http_comp_bytes_out_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes emitted {{ proxy }} ","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_frontend_http_comp_bytes_bypassed_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Bytes bypassed  {{ proxy }} ","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Compressor","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":141,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_backend_http_comp_responses_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} ","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Responses compressed","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":123,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_frontend_http_comp_responses_total{proxy=~\"$backend\", instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} ","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Responses compressed","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Cache / Compressor","titleSize":"h6"},{"collapse":true,"height":338,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":1,"grid":{},"id":112,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_backend_status{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Status","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":1,"grid":{},"id":113,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_frontend_status{proxy=~\"$frontend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Front - Status","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Status","titleSize":"h6"},{"collapse":true,"height":485,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":129,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*OUT.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_bytes_in_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])*8","interval":"$interval","intervalFactor":1,"legendFormat":"IN {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_server_bytes_out_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])*8","hide":false,"interval":"$interval","intervalFactor":2,"legendFormat":"OUT {{ proxy }} / {{ server }}","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Current total of incoming / outgoing bytes","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":130,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_connection_attempts_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Attempts {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_server_connection_errors_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Error {{ proxy }} / {{ server }}","refId":"A","step":60},{"expr":"irate(haproxy_server_connection_reuses_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":2,"legendFormat":"Reuses {{ proxy }} / {{ server }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Total number of connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":145,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_status{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Status","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":59,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_current_queue{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Current {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"haproxy_server_max_queue{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30},{"expr":"haproxy_server_queue_limit{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Limit {{ proxy }} / {{ server }}","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Number of queued requests","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":133,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_http_queue_time_average_seconds{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Avg. queue time for last 1024 successful connections","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"By Server Throughtput / Connections / Queue","titleSize":"h6"},{"collapse":true,"height":518,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":71,"legend":{"alignAsTable":true,"avg":true,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_redispatch_warnings_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":2,"legendFormat":"Redispatch {{ proxy }} / {{ server }}","refId":"B","step":60},{"expr":"irate(haproxy_server_retry_warnings_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Retry {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_server_response_errors_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":2,"legendFormat":"Error {{ proxy }} / {{ server }}","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Total of Retry / Error / Redispatch warnings","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":135,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*total.*/","stack":false},{"alias":"/.*total.*/","fill":0}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_server_http_connect_time_average_seconds{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. connect time  {{ proxy }} / {{ server }}","metric":"haproxy_backend_current_queue","refId":"B","step":30},{"expr":"haproxy_server_http_response_time_average_seconds{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. response time  {{ proxy }} / {{ server }}","metric":"haproxy_backend_current_queue","refId":"C","step":30},{"expr":"haproxy_server_http_total_time_average_seconds{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Avg. total time  {{ proxy }} / {{ server }}","metric":"haproxy_backend_current_queue","refId":"D","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Back - Average times","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"cumulative"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"By Server Requests / Responses","titleSize":"h6"},{"collapse":true,"height":-68,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"height":"400px","id":64,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":12,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_http_responses_total{proxy=~\"$backend\",server=~\"$server\",code=~\"$code\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} {{ server }} {{ code }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Total of HTTP responses","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"By Server Responses by HTTP code","titleSize":"h6"},{"collapse":true,"height":541,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":61,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_current_sessions{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Current {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_server_sessions_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_server_max_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}[5m])","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Max {{ proxy }} / {{ server }}","metric":"","refId":"C","step":30},{"expr":"haproxy_server_limit_sessions{proxy=~\"$backend\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Limit {{ proxy }} / {{ server }}","metric":"","refId":"D","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Number of active sessions","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":60,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Limit.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_max_session_rate{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Rate {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"haproxy_server_limit_session_rate{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Limit {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Number of sessions per second and limit","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":137,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null as zero","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Error.*/","transform":"negative-Y"},{"alias":"/.*Denied.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_failed_header_rewriting_total{proxy=~\"$frontend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} /  {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Failed header rewriting warnings","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":146,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*server.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_client_aborts_total{proxy=~\"$frontend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"By client {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"haproxy_server_server_aborts_total{proxy=~\"$frontend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"By server {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server -  Data transfers aborted","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"By Server Sessions","titleSize":"h6"},{"collapse":true,"height":559,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":62,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_downtime_seconds_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"haproxy_backend_current_queue","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Total downtime in seconds","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":56,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*transitions.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"increase(haproxy_server_check_failures_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of failed check {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30},{"expr":"increase(haproxy_server_check_up_down_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of UP->DOWN transitions {{ proxy }} / {{ server }}","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Checks history","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":57,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_connection_errors_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Total of connection errors","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":"0","show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":90,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_current_throttle{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current throttle percentage for the server, when slowstart is active, or no value if not in slowstart {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Throttle","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":1,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":91,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_loadbalanced_total{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of times a service was selected {{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Loadbalanced","tooltip":{"msResolution":true,"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","decimals":0,"description":"","editable":true,"error":false,"fill":2,"grid":{},"id":144,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_server_last_session_seconds{proxy=~\"$backend\", server=~\"$server\",instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Number of seconds since last session assigned to server/backend","tooltip":{"msResolution":true,"shared":true,"sort":1,"value_type":"individual"},"transparent":false,"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"s","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","description":"","editable":true,"error":false,"fill":2,"grid":{},"id":73,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":6,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_server_weight{proxy=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"{{ proxy }} / {{ server }}","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Server - Service weight","tooltip":{"msResolution":true,"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"none","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"By Server Health / Weight","titleSize":"h6"},{"collapse":true,"height":510,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":101,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Configured.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_session_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of sessions per second over last elapsed second","metric":"","refId":"A","step":30},{"expr":"haproxy_process_limit_session_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum number of sessions per second","metric":"","refId":"B","step":30},{"expr":"haproxy_process_max_session_rate{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum observed number of sessions per second","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Sessions over last second","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":96,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_connections{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Number of active sessions","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_process_connections_total{instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Total number of created sessions","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_process_requests_total{instance=~\"$host:$port\"}[5m])","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Total number of requests (TCP or HTTP)","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Total sessions / requests","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":100,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Configured.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_connection_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of connections per second over last elapsed second","metric":"","refId":"A","step":30},{"expr":"haproxy_process_limit_connection_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum number of connections per second.","metric":"","refId":"B","step":30},{"expr":"haproxy_process_max_connection_rate{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum observed number of connections per second","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Connections over last second","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":95,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Initial.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_max_connections{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Maximum number of concurrent connections","metric":"","refId":"A","step":30},{"expr":"haproxy_process_hard_max_connections{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Initial Maximum number of concurrent connections","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Connections","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Process Connections / Sessions / Requests","titleSize":"h6"},{"collapse":true,"height":376,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":106,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Configured.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_zlib_memory{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current memory used for zlib in bytes","metric":"","refId":"A","step":30},{"expr":"haproxy_process_max_zlib_memory{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum amount of memory for zlib in bytes","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Compression memory","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":105,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Configured.*/","fill":0},{"alias":"/.*Configured.*/","stack":false}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_process_http_comp_bytes_in_total{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Number of bytes per second over last elapsed second, before http compression","metric":"","refId":"A","step":30},{"expr":"haproxy_process_http_comp_bytes_out_total{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Number of bytes per second over last elapsed second, after http compression","metric":"","refId":"B","step":30},{"expr":"haproxy_process_limit_http_comp{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum input compression rate in bytes","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Compression","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Process Compression","titleSize":"h6"},{"collapse":true,"height":450,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":104,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*misses.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_process_ssl_cache_lookups_total{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of SSL session cache lookups","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_process_ssl_cache_misses_total{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of SSL session cache misses","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - SSL cache","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":103,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*backend.*/","transform":"negative-Y"},{"alias":"/.*Maximum.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_frontend_ssl_key_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current frontend SSL Key computation per second over last elapsed second","metric":"","refId":"A","step":30},{"expr":"haproxy_process_max_frontend_ssl_key_rate{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum observed frontend SSL Key computation per second","metric":"","refId":"B","step":30},{"expr":"haproxy_process_current_backend_ssl_key_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current backend SSL Key computation per second over last elapsed second","metric":"","refId":"D","step":30},{"expr":"haproxy_process_max_backend_ssl_key_rate{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum observed backend SSL Key computation per second","metric":"","refId":"E","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - SSL key rate","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":102,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Maximum.*/","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_ssl_rate{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of SSL sessions per second over last elapsed second","metric":"","refId":"A","step":30},{"expr":"haproxy_process_limit_ssl_rate{instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum number of SSL sessions per second","metric":"","refId":"B","step":30},{"expr":"haproxy_process_max_ssl_rate{instance=~\"$host:$port\"}","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum observed number of SSL sessions per second","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - SSL rate","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":98,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Maximum*./","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_current_ssl_connections{instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Current number of opened SSL connections","metric":"","refId":"D","step":30},{"expr":"haproxy_process_max_ssl_connections{instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum number of concurrent SSL connections","metric":"","refId":"E","step":30},{"expr":"irate(haproxy_process_ssl_connections_total{instance=~\"$host:$port\"}[5m])","hide":true,"interval":"$interval","intervalFactor":1,"legendFormat":"Total number of opened SSL connections","metric":"","refId":"F","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - SSL connections","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":150,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*backend.*/","transform":"negative-Y"}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_frontent_ssl_reuse{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"SSL session reuse ratio (percent)","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - SSL reuse ratio","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Process SSL","titleSize":"h6"},{"collapse":true,"height":473,"panels":[{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":87,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*limit+./","fill":0}],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_max_memory_bytes{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Per-process memory limit (in bytes); 0=unset","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_process_pool_allocated_bytes{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total amount of memory allocated in pools (in bytes)","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_process_pool_used_bytes{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Total amount of memory used in pools (in bytes)","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Memory","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":107,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_process_current_tasks{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of tasks","metric":"","refId":"A","step":30},{"expr":"haproxy_process_current_run_queue{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of tasks in the run-queue","metric":"","refId":"B","step":30},{"expr":"haproxy_process_stopping{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Non zero means stopping in progress","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Tasks","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":89,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_max_fds{instance=~\"$host:$port\"}","hide":false,"interval":"$interval","intervalFactor":1,"legendFormat":"Maximum number of open file descriptors; 0=unset","metric":"","refId":"A","step":30},{"expr":"haproxy_process_max_sockets{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Maximum numer of open sockets","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Maximum open files / sockets","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":99,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"alias":"/.*Configured.*/","fill":0},{"alias":"/.*Configured.*/","stack":false}],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_process_max_pipes{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Configured maximum number of pipes","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_process_pipes_used_total{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Number of pipes in used","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_process_pipes_free_total{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Number of pipes unused","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Pipes","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":86,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_nbthread{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Threads","metric":"","refId":"A","step":30},{"expr":"haproxy_process_nbproc{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Processes","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Configured threads / processes","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":88,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_process_pool_failures_total{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of failed pool allocations","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Pool allocations","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":108,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_idle_time_percent{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Idle to total ratio over last sample (percent)","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Idle","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"percent","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":109,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"irate(haproxy_process_jobs{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of active jobs (listeners, sessions, open devices)","metric":"","refId":"A","step":30},{"expr":"irate(haproxy_process_unstoppable_jobs{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of active jobs that can't be stopped during a soft stop","metric":"","refId":"B","step":30},{"expr":"irate(haproxy_process_listeners{instance=~\"$host:$port\"}[5m])","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of active listeners","metric":"","refId":"C","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Jobs","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":110,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":false,"steppedLine":false,"targets":[{"expr":"haproxy_process_active_peers{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of active peers","metric":"","refId":"A","step":30},{"expr":"haproxy_process_connected_peers{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Current number of connected peers","metric":"","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Peers","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]},{"aliasColors":{},"bars":false,"datasource":"Prometheus","editable":true,"error":false,"fill":2,"grid":{},"id":111,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":12,"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"span":6,"stack":true,"steppedLine":false,"targets":[{"expr":"haproxy_process_dropped_logs_total{instance=~\"$host:$port\"}","interval":"$interval","intervalFactor":1,"legendFormat":"Total number of dropped logs","metric":"","refId":"A","step":30}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Process - Logs","tooltip":{"msResolution":true,"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":0,"show":false}]}],"repeat":null,"repeatIteration":null,"repeatRowId":null,"showTitle":false,"title":"Process Misc","titleSize":"h6"}],"schemaVersion":14,"style":"dark","tags":["haproxy","servers"],"templating":{"list":[{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":false,"label":"Host","multi":false,"name":"host","options":[],"query":"label_values(haproxy_process_nbproc,instance)","refresh":1,"regex":"/([^:]+):.*/","sort":1,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","hide":2,"includeAll":false,"label":null,"multi":false,"name":"port","options":[],"query":"label_values(haproxy_process_nbproc, instance)","refresh":1,"regex":"/[^:]+:(.*)/","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":"Backend","multi":true,"name":"backend","options":[],"query":"label_values(haproxy_backend_status{instance=~\"$host:$port\"}, proxy)","refresh":1,"regex":"","sort":1,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":"Frontend","multi":true,"name":"frontend","options":[],"query":"label_values(haproxy_frontend_status{instance=~\"$host:$port\"}, proxy)","refresh":1,"regex":"","sort":1,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":true},{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":"Server","multi":true,"name":"server","options":[],"query":"label_values(haproxy_server_status{instance=~\"$host:$port\"}, server)","refresh":1,"regex":"","sort":1,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":false},{"allValue":null,"current":{},"datasource":"Prometheus","hide":0,"includeAll":true,"label":"HTTP Code","multi":true,"name":"code","options":[],"query":"label_values(haproxy_server_http_responses_total{instance=~\"$host:$port\"}, code)","refresh":1,"regex":"","sort":1,"tagValuesQuery":null,"tags":[],"tagsQuery":null,"type":"query","useTags":false},{"auto":true,"auto_count":30,"auto_min":"10s","current":{"text":"30s","value":"30s"},"hide":0,"label":"Interval","name":"interval","options":[{"selected":false,"text":"auto","value":"$__auto_interval"},{"selected":true,"text":"30s","value":"30s"},{"selected":false,"text":"1m","value":"1m"},{"selected":false,"text":"5m","value":"5m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"1d","value":"1d"}],"query":"30s,1m,5m,1h,6h,1d","refresh":2,"type":"interval"}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"HAProxy 2.0","version":135}
